<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.3 at May 12, 2012 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Maven SVN Revision Number Plugin - Usage</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
      <meta name="author" content="Oleg Estekhin" />
    <meta name="Date-Creation-yyyymmdd" content="20120420" />
    <meta name="Date-Revision-yyyymmdd" content="20120512" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                Maven SVN Revision Number Plugin
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
                                  <a href="http://maven.apache.org/" class="externalLink" title="Maven">Maven</a>
        &gt;
    Usage
      </div>
            <div class="xright">        
                    
                 <span id="publishDate">Last Published: 2012-05-12</span>
              &nbsp;| <span id="projectVersion">Version: 1.11</span>
            </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Overview</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Introduction">Introduction</a>
            </li>
                  <li class="none">
                          <a href="plugin-info.html" title="Goals">Goals</a>
            </li>
                  <li class="none">
            <strong>Usage</strong>
          </li>
          </ul>
                       <h5>Examples</h5>
                  <ul>
                  <li class="none">
                          <a href="examples/resource_filtering.html" title="Storing output properties in a file">Storing output properties in a file</a>
            </li>
                  <li class="none">
                          <a href="examples/artifact_name.html" title="Adding the revision number to the artifact name">Adding the revision number to the artifact name</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                  <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                        <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Usage<a name="Usage"></a></h2><p>The Maven SVN Revision Number Plugin retrieves the status and revision number of a file or a directory under the Subversion version control and exposes this information in the form of the project properties which can be used in the subsequent phases of the build lifecycle.</p><div class="section"><h3>Running the plugin automatically during the build<a name="Running_the_plugin_automatically_during_the_build"></a></h3><p>By default, the <tt>revision</tt> goal is bound to the <tt>initialize</tt> phase. Below is a sample <tt>pom.xml</tt> fragment for running the <tt>revision</tt> goal every time the project is built:</p><div class="source"><pre>&lt;project&gt;
    ...
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;com.google.code.maven-svn-revision-number-plugin&lt;/groupId&gt;
                &lt;artifactId&gt;svn-revision-number-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;1.11&lt;/version&gt; &lt;!-- please use the latest version --&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;revision&lt;/goal&gt;
                        &lt;/goals&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
                &lt;configuration&gt;
                    &lt;!-- put required configuration here --&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
    ...
&lt;/project&gt;
</pre></div></div><div class="section"><h3>Entries configuration<a name="Entries_configuration"></a></h3><p>Without explicit configuration the plugin will inspect the project's <tt>basedir</tt> directory, collecting the status information recursively for all files and folders below it. The resulting properties with the aggregated status information will be prefixed with the project's <tt>artifactId</tt>.</p><p>Explicit configuration allows to obtain the status of more than one directory or a file. Below is a sample configuration that contains a single entry with the default parameter values:</p><div class="source"><pre>&lt;configuration&gt;
    &lt;entries&gt;
        &lt;entry&gt;
            &lt;path&gt;${project.basedir}&lt;/path&gt;
            &lt;prefix&gt;${project.artifactId}&lt;/prefix&gt;
            &lt;depth&gt;infinity&lt;/depth&gt;
            &lt;reportUnversioned&gt;true&lt;/reportUnversioned&gt;
            &lt;reportIgnored&gt;false&lt;/reportIgnored&gt;
            &lt;reportOutOfDate&gt;false&lt;/reportOutOfDate&gt;
        &lt;/entry&gt;
    &lt;/entries&gt;
&lt;/configuration&gt;
</pre></div><p>Each entry can specify its own parameters:</p><ul><li><b>path</b> is the local path to a file or a directory whose status will be inspected.<br />The default value is the project's <tt>basedir</tt>.</li><li><b>prefix</b> is the prefix for the properties that will contain the entry status.<br />If two or more entries use the same prefix then the plugin will emit a warning and the values of the output properties with that prefix will be determined by the last checked entry.<br />The default value is the project's <tt>artifactId</tt>.</li><li><b>depth</b> specifies the depth of the entries whose status information should be collected. The possible values are:<ul><li><tt>empty</tt> - checks the status of the target entry only.</li><li><tt>files</tt> - checks the status of the target entry and, if it is a directory, files immediately below it.</li><li><tt>immediates</tt> - checks the status of the target entry and, if it is a directory, files and subdirectories immediately below it. The contents of subdirectories will not be checked.</li><li><tt>infinity</tt> - checks the status of the target entry and, if it is a directory, all files and directories below it.</li></ul><p>The default value is <tt>infinity</tt>. The semantics of the <tt>depth</tt> parameter are consistent with the Subversion <a class="externalLink" href="http://svnbook.red-bean.com/en/1.7/svn.advanced.sparsedirs.html">depth</a> option.</p></li><li><b>reportUnversioned</b> specifies whether to report items that are not under version control.<br />The default value is <tt>true</tt>.</li><li><b>reportIgnored</b> specifies whether to report items that were set to be <a class="externalLink" href="http://svnbook.red-bean.com/en/1.7/svn.advanced.props.special.ignore.html">ignored</a> either in the global Subversion configuration or by the <tt>svn:ignore</tt> property.<br />The default value is <tt>false</tt>.</li><li><b>reportOutOfDate</b> specifies whether to report items that are out of date. If this option is enabled then the plugin will check the repository for modifications.<br />The default value is <tt>false</tt>.</li></ul></div><div class="section"><h3>Output properties<a name="Output_properties"></a></h3><p>For each configured entry the plugin will set a number of project properties:</p><ul><li><b>prefix.repository</b> will contain the remote repository root.</li><li><b>prefix.path</b> will contain the entry path relative to the root of the remote repository.</li><li><b>prefix.revision</b> will contain the current revision number of the entry in the working copy.<br />The value of this property can be safely used as an argument for the <tt>java.lang.Long.parseLong(String)</tt> method.</li><li><b>prefix.mixedRevisions</b> will indicate whether the working copy below the entry path contains <a class="externalLink" href="http://svnbook.red-bean.com/en/1.7/svn.basic.in-action.html#svn.basic.in-action.mixedrevs">mixed revisions</a>.<br />The value of this property can be safely used as an argument for the <tt>java.lang.Boolean.parseBoolean(String)</tt> method.</li><li><b>prefix.committedRevision</b> will contain the revision number when the entry was last changed (committed).<br />The value of this property can be safely used as an argument for the <tt>java.lang.Long.parseLong(String)</tt> method.</li><li><b>prefix.committedDate</b> will contain the date when the entry was last changed (committed).<br />The date is formatted by the <tt>String.format( Locale.ENGLISH, &quot;%tF %&lt;tT %&lt;tz (%&lt;ta, %&lt;td %&lt;tb %&lt;tY)&quot;, date )</tt> call which produces strings like <tt>2010-06-18 19:51:59 +0300 (Fri, 18 Jun 2010)</tt>.</li><li><b>prefix.status</b> will contain a set of characters describing the status of the entry:<ul><li><tt>'A'</tt> - some item in the working copy is scheduled for addition to the repository.</li><li><tt>'C'</tt> - the contents or properties of some item conflict with updates received from the repository.</li><li><tt>'D'</tt> - some item in the working copy is scheduled for deletion from the repository.</li><li><tt>'I'</tt> - the reporting of ignored items is enabled and the working copy contains ignored items.<br />The reporting of ignored items is disabled by default.</li><li><tt>'M'</tt> - some item in the working copy has local modifications.</li><li><tt>'R'</tt> - some item in the working copy was replaced (it was scheduled for deletion, and then a new item with the same name was scheduled for addition).</li><li><tt>'X'</tt> - some item in the working copy is present because of an externals definition.</li><li><tt>'?'</tt> - the working copy contains unversioned items.<br />The reporting of unversioned items is enabled by default.</li><li><tt>'!'</tt> - some items in the working copy are missing (the most common case is deleting the file or directory without using svn) or some directory in the working copy is incomplete (a checkout or update operation was interrupted).</li><li><tt>'~'</tt> - some item in the working copy is obstructed (it is versioned as a file or a directory but has been replaced by a directory or a file respectively).</li><li><tt>'*'</tt> - a newer revision of some local item exists in the remote repository.<br />The reporting of out-of-date items is disabled by default.</li></ul><p>The status characters for <tt>prefix.status</tt> property are consistent with the output of the <a class="externalLink" href="http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.status.html">svn status</a> command.</p><p>The <tt>prefix.status</tt> will be empty if the entry has no local modifications.</p></li><li><b>prefix.specialStatus</b> will contain the same information as the <tt>prefix.status</tt> except that it uses lower-case letters instead of the characters that can not be used in the file names:<ul><li>Unversioned items are reported using the <tt>'u'</tt> instead of the <tt>'?'</tt>.</li><li>Missing items are reported using the <tt>'m'</tt> and incomplete items are reported using the <tt>'i'</tt> instead of the <tt>'!'</tt>.</li><li>Obstructed items are reported using the <tt>'o'</tt> instead of the <tt>'~'</tt>.</li><li>Out-of-date items are reported using the <tt>'d'</tt> instead of the <tt>'*'</tt>.</li></ul><p>The <tt>prefix.specialStatus</tt> will be empty if the entry has no local modifications.</p></li></ul><p>If the entry is not under version control then the <tt>prefix.repository</tt> and the <tt>prefix.path</tt> will be empty strings, the <tt>prefix.revision</tt> and the <tt>prefix.committedRevision</tt> will be set to <tt>&quot;-1&quot;</tt>, the <tt>prefix.committedDate</tt> will be empty string, the <tt>prefix.mixedRevisions</tt> will be set to <tt>&quot;false&quot;</tt>, the <tt>prefix.status</tt> to <tt>&quot;?&quot;</tt> and the <tt>prefix.specialStatus</tt> to <tt>&quot;u&quot;</tt>.</p><p>If the entry path denotes a file or if the <tt>depth</tt> value is <tt>empty</tt> then the output properties will represent the status of the entry itself and the <tt>prefix.status</tt> and the <tt>prefix.specialStatus</tt> will contain at most one character.</p><p>If the entry path denotes a directory and the <tt>depth</tt> value is one of <tt>files</tt>, <tt>immediates</tt> or <tt>infinity</tt> then the <tt>prefix.revision</tt> will be set to the maximum revision number found inside the entry directory, the <tt>prefix.committedRevision</tt> will be set to the maximum last committed revision number found inside the entry directory and the <tt>prefix.committedDate</tt> will be set to the timestamp of that revision, the <tt>prefix.status</tt> and the <tt>prefix.specialStatus</tt> will contain a set of characters that describe all statuses encountered inside the entry directory.</p></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2009-2012
                      Oleg Estekhin.
            All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
